<div class='card'>  
    <figure class="entry-cover">
        <video id="yesterdayvideo" loop="" autoplay="" muted="">
            <source src="https://weather.lloyd.ws/static/img/webcam/video/latest-720.webm" type="video/webm">
        </video>
        <p>Time Lapse of the sky in Bishops Waltham yesterday.</p>
    </figure>
</div>
<table>
    <tr><th colspan="2">Live Weather Data</th></tr>
    <tr><th>Temperature</th><td><div id="temperature"></div>°C</td></tr>
    <tr><th>Humidity</th><td><div id="humidity"> </div>%</td></tr>
    <tr><th>Wind Direction</th><td><div id="Wind_Direction">360</div>°</td></tr>
    <tr><th>Wind Speed</th><td><div id="Wind_Speed">0</div>m/s</td></tr>
</table>



<script>
  async function fetchWeatherData() {
    try {
        const response = await fetch('https://weather.lloyd.ws/json');
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        const data = await response.json();

        // Update Odometer instances (assuming you've initialized them)
        temperatureOdometer.update(data.weather_Outdoor_Temperature.value);
        windDirectionOdometer.update(data.weather_Wind_Direction.value);
        windSpeedOdometer.update(data.weather_Wind_Speed.value);
        humidityOdometer.update(data.weather_Outdoor_Humidity.value);

    } catch (error) {
        console.error('Error fetching weather data:', error);
        // Display an error message to the user
    }
}

// Initialize Odometer instances (make sure you have Odometer.js included)
const temperatureOdometer = new Odometer({
    el: document.getElementById('temperature'),
    format: '(,ddd).dd', // Adjust format as needed
    // Or choose another theme
});
const windDirectionOdometer = new Odometer({
    el: document.getElementById('Wind_Direction'),
    format: '(,ddd).ddd', // Adjust format as needed
    
});
const windSpeedOdometer = new Odometer({
    el: document.getElementById('Wind_Speed'),
    format: '(ddd).ddd', // Adjust format as needed
    
});
const humidityOdometer = new Odometer({
    el: document.getElementById('humidity'),
    format: '(,ddd).dd', // Adjust format as needed
  
});

// Initial fetch and periodic updates
fetchWeatherData();
setInterval(fetchWeatherData, 3 * 1000);
</script>